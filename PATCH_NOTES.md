# LCK Manager Simulation - 패치 노트

## 🎮 주요 업데이트

### UI/UX 대규모 개편

#### 리포트 형식 레이아웃 도입
- 메인 화면을 리포트 형식으로 재구성하여 가독성 향상
- 상단 헤더와 하단 입력 영역을 전체 너비로 고정
- 메인 콘텐츠 영역을 중앙 정렬 및 최대 너비 제한 (1200px)
- AI 메시지는 리포트 형식으로, 사용자 메시지는 우측 정렬 말풍선으로 표시
- 말풍선 크기가 텍스트 길이에 맞춰 동적으로 조정

#### 텍스트 콘텐츠 스타일링 개선
- 구분선(`---`)을 시각적 구분선으로 렌더링
- 강조 텍스트(`**...**`)에 눈에 띄는 색상 및 스타일 적용
- `[STATUS]` 정보를 독립적인 블록 형태로 표시
- `[알림]` 정보에 아이콘(🔔)과 배경색 적용
- 제목(`**[제목]**`)에 더 큰 글자 크기와 강한 강조 적용
- 마크다운 문법(`**`, `###`, `##`, `#`)이 화면에 직접 표시되지 않도록 처리

#### 하단 입력 영역 개편
- `GameInputFooter` 컴포넌트로 분리하여 모듈화
- 버튼 배치: 작전지시 → 메뉴 → 뉴스 → 입력 필드 → 전송 → 설정
- 전체 너비 배경, 내부 컨텐츠는 메인 화면에 맞춰 정렬
- 모바일 최적화: 버튼 크기 48px (터치 타겟 확대), 간격 조정

---

## 🎯 새로운 기능

### 작전지시 모달 시스템
- 게임 진행 상황에 맞춰 가능한 행동을 버튼 리스트로 표시
- "일정 진행" 버튼을 항상 최상단에 고정 표시 (다른 선택지와 구분)
- 모달 토글 기능: 버튼 재클릭 또는 화면 외부 클릭 시 닫힘
- PC: 버튼 바로 위에 표시, 모바일: 화면 하단 중앙에 표시
- 메인 화면 클릭 시에도 모달이 닫히도록 개선

### 뉴스 모달 통합
- AI가 생성한 뉴스 리포트를 뉴스 모달에 표시
- 최신 5개의 뉴스 리포트를 상단에 별도 섹션으로 표시
- 뉴스 버튼을 하단 좌측(작전지시 옆)에 배치
- 상단 헤더의 뉴스/설정 버튼 제거 (하단으로 통합)

### 게임 정보 메뉴
- 게임 정보 버튼 추가 (작전지시 우측)
- 홈, 팀 관리, 경기 일정, 뉴스, 리그 통계, FA 명단 메뉴 접근
- 단장 모드와 선수 모드에 따라 메뉴 항목 필터링

---

## 🐛 버그 수정

### 무한 회귀 버그 수정
- `GameChatInterface`의 `useEffect`에서 `messages` 의존성 제거
- 뉴스 메시지 추가 시 무한 루프 방지 로직 개선
- `useGameStore.getState()`를 직접 호출하여 최신 상태 조회

### 날짜 역행 방지 강화
- `validateDateUpdate` 함수를 모든 날짜 업데이트 경로에 적용
- `sendCommand`, `advanceDay`, `parseAIResponse`, `loadGame` 등 9곳에서 검증
- 날짜 역행 시 현재 날짜 유지 및 콘솔 경고 출력
- 이중 보호 로직으로 최종 날짜 검증 추가

### 모달 상호작용 개선
- 모든 모달이 배경 클릭 또는 토글 버튼 재클릭 시 닫히도록 수정
- `pointer-events` CSS 속성을 활용한 정확한 클릭 처리
- 모달 열림 상태에 따른 버튼 배경색 변경 (시각적 피드백)

---

## 📱 모바일 최적화

### 반응형 디자인 개선
- 버튼 크기: 모바일 48px → 작은 화면 44px → 데스크톱 40px
- 아이콘 크기: 모바일 20px → 작은 화면 18px → 데스크톱 16px
- 간격 조정: 모바일 `gap-1.5` → 데스크톱 `gap-2`
- 패딩 최적화: 모바일 `p-2` → 작은 화면 `p-3` → 데스크톱 `p-4`
- 입력 필드: `min-w-0` 추가로 flex-1이 제대로 작동하도록 수정

### 터치 최적화
- 모든 버튼에 `touch-manipulation` 클래스 적용
- 버튼 클릭 시 `active:scale-95` 애니메이션 추가
- 모달 스크롤 영역에 `-webkit-overflow-scrolling: touch` 적용

---

## 🎨 UI 컴포넌트 개선

### 헤더 상태 표시
- 날짜, D-Day, 자금 정보를 좌측에 배치
- 시즌 상태와 아이콘을 우측에 배치
- 메인 화면(`max-w-[1200px]`)에 맞춰 중앙 정렬
- 모바일/데스크톱 레이아웃 분리

### 채팅 인터페이스
- 리포트 형식 메시지 감지 로직 개선
- 사용자 메시지 우측 정렬 개선
- 메시지 페이드인 애니메이션 추가
- 테이블 내 사용자 플레이어 행 강조 표시

### 모달 애니메이션
- `modal-fade-in`, `slide-up`, `slide-down` 키프레임 추가
- 모달 열림/닫힘 시 부드러운 전환 효과
- 메시지 페이드인 애니메이션

---

## 🔧 기술적 개선

### 컴포넌트 분리 및 모듈화
- `GameInputFooter` 컴포넌트 생성 (하단 입력 영역 분리)
- 상태 관리 로직을 컴포넌트 내부로 캡슐화
- 재사용 가능한 컴포넌트 구조로 개선

### 성능 최적화
- `useMemo` 및 `useCallback` 훅을 활용한 불필요한 리렌더링 방지
- 메시지 렌더링 로직 최적화
- CSS `will-change` 속성으로 애니메이션 성능 향상

### 타입 안정성
- 모든 TypeScript 타입 오류 수정
- `availableActions` 타입에 `icon` 속성 추가
- `SeasonEvent` 타입에 `"ewc"` 추가

---

## 🎮 게임 모드 검증

### 단장 모드
- 초기화 흐름: API 키 → 모드 선택 → 팀 선택 → 게임 시작
- 캐릭터 생성 없이 바로 팀 선택 가능
- 모든 기능 정상 동작 확인

### 선수 모드
- 초기화 흐름: API 키 → 모드 선택 → 캐릭터 생성 → 팀 선택 → 게임 시작
- `userPlayer`, `userPlayerInitialTrait`, `userPlayerRoleModelId` 상태 관리 정상
- 선수 모드 전용 메뉴 필터링 정상 동작

---

## 📊 통계 및 데이터

### 선수 통계 페이지
- "First Stand" 및 "EWC" 국제 대회 탭 추가
- 대회 탭 순서 재정렬: 전체 → KeSPA Cup → First Stand → 정규 시즌 → MSI → EWC → Worlds
- "전체" 옵션 추가로 모든 대회 통계 집계 가능

---

## 🎯 향후 개선 사항

- 추가 모바일 최적화 (더 작은 화면 대응)
- 애니메이션 성능 추가 최적화
- 접근성 개선 (키보드 네비게이션, 스크린 리더 지원)

---

## 📝 개발자 노트

이번 패치는 UI/UX 대규모 개편과 함께 버그 수정 및 성능 최적화를 포함합니다. 특히 무한 회귀 버그와 날짜 역행 방지 로직을 강화하여 게임 안정성을 크게 향상시켰습니다.

모바일 사용자 경험 개선에 중점을 두었으며, 모든 주요 기능이 모바일에서도 원활하게 작동하도록 최적화했습니다.

---

**패치 버전**: 1.0.0  
**배포 일자**: 2025년 11월  
**주요 변경사항**: UI/UX 개편, 버그 수정, 모바일 최적화

